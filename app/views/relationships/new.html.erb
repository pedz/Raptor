<%# -*- coding: utf-8 -*- -%>
<h1>New relationship</h1>

<% form_for(@relationship) do |f| %>
  <%= f.error_messages %>

  <p>
    <%= f.label :container_name_id %><br />
    <%= f.collection_select(:container_name_id,
            Name.find(:all,
		:joins => "INNER JOIN name_types ON type = name_types.name_type",
                :conditions => { "name_types.container" => true }), :id, :name, { :include_blank => true }) %>
    <%= observe_field(:relationship_container_name_id,
                      :url => { :action => :container_name_set },
                      :update => :relationship_relationship_type_id,
                      :with => 'container_name_id') %>
  </p>
  <p>
    <%= f.label :relationship_type_id %><br />
    <%= f.collection_select(:relationship_type_id, [], :id, :to_option, { :prompt => "Please Pick Container Name" }) %>
    <%= observe_field(:relationship_relationship_type_id,
                      :url => { :action => :relationship_type_set },
                      :update => :relationship_element_name_id,
                      :with => 'relationship_type_id') %>
  </p>
  <p>
    <%= f.label :element_name_id %><br />
    <%= f.collection_select(:element_name_id, [], :id, :name, { :prompt => "Please Pick Relationship Type" }) %>
  </p>
  <p>
    <%= f.submit 'Create' %>
  </p>
<% end %>

<%= link_to 'Back', relationships_path %>
